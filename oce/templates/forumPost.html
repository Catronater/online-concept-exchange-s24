{% extends 'base.html' %}

{% block content %}

<div style="text-align: center;">
    <h1 for="newPost">New Post:</h1>
    <textarea id="postContent" name="newPost" rows="10" cols="100" placeholder="Type your new post here!"></textarea>
    <button id="postButton" class="btn btn-primary has-icon btn-block" type="button">Post</button> 
</div>

<script>
    document.getElementById('postButton').addEventListener('click', async () => {
    const content = document.getElementById('postContent').value.trim();

    if (content === '') {
      alert('Please enter a message before posting.');
      return;
    }

    try {
      const response = await fetch('/create_post', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ text_content: content }),
      });

      const result = await response.json();
      if (result.success) {
        alert('Your message has been posted!');
        document.getElementById('postContent').value = ''; // Clear the textbox
      } else {
        alert('Failed to post your message.');
      }
    } catch (error) {
      console.error('Error:', error);
      alert('An error occurred while posting your message.');
    }
  });
</script>



{% endblock %}